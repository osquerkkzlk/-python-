
## 1. Python 的布尔上下文规则

在 `if` 判断里，Python 会调用对象的 **布尔值**：

* 首先调用对象的 `__bool__()` 方法（如果有的话）。
* 如果没有 `__bool__`，再看 `__len__()`，长度为 0 → `False`，否则 → `True`。
* 如果都没有，默认 `True`。

---

### 2. 常见内置类型的布尔值

在布尔上下文里为 **False** 的典型情况有：

* `None`
* `False`
* 数字 `0`（包括 `0.0`, `0j`, Decimal(0), Fraction(0,1)）
* 空序列/空集合：`""`, `[]`, `()`, `set()`, `dict()`

也就是说：

```python
if "":   # 空字符串
    print("真")
else:
    print("假")   # 输出 假

if []:   # 空列表
    print("真")
else:
    print("假")   # 输出 假
```

---

### 3. 和 `None` 的区别

* `None` 当然是假 (`False`)。
* 但是 **空字符串、空列表、空字典** 等等，也是假 (`False`)。
* 它们和 `None` **不是同一个东西**，但是在布尔判断时表现一样。

---

## 2. 上下文管理器 with块

1. 上下文管理器接口包含 __enter__方法和__exit__方法，with语句开始运行时，python在上下文管理
器对象上调用__enter__方法。with块结束时，或者异常中止时，python在上下文管理器对象上调用__exit__方法。
2. 解释器调用__enter__方法时，只接受隐式的self。调用__exit__方法时，接收三个参数——exc_type(异常类)，exc_value(异常实例)，traceback对象。
3. contextmanager装饰器会把简单的生成器函数编程上下文管理器，比较方便。